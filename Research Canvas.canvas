{
	"nodes":[
		{"id":"d66be28ac10eb9f9","type":"text","text":"## Robustness to differences in data\n- distribution shifts\n- differing input features","x":-617,"y":-320,"width":325,"height":160,"color":"3"},
		{"id":"87977fdd84f396d0","type":"text","text":"# DATA","x":-291,"y":-600,"width":250,"height":60,"color":"3"},
		{"id":"5450ad07019b95df","type":"text","text":"### Batch Effect\n- simulating batch effect with crafted noising\n- [[Batch Effect Disentanglement]]","x":-1120,"y":-240,"width":307,"height":180},
		{"id":"5df52eaf90b24438","type":"text","text":"### masked modelling & input choice modules/routers","x":-990,"y":0,"width":354,"height":120},
		{"id":"600f191534d4d00c","type":"text","text":"### MOE\n- there are diffferent formulations of MOE\n\t- TODO - check which are the most appropriate\n- verifying if it allows to route samples from different distributions separately and e.g. normalize them separately","x":-617,"y":0,"width":393,"height":302},
		{"id":"eb096f6e8a28bdb2","type":"text","text":"## Datasets\n- ### Atlases\n\t- e.g. [An integrated cell atlas of the lung in health and disease](https://www.nature.com/articles/s41591-023-02327-2?fromPaywallRec=false)\n- ### single cell\n\t- [UCSC Xena data porta](https://xenabrowser.net/datapages/)\n\t\t- 1620 datasetów od kilkuset do kilkunastu tysięcy próbek na oko\n\t\t- note, that some datasets cannot be use solely for the development of methods (so if one wants to use it in poublication needs to add bio insights?)","x":-224,"y":-240,"width":361,"height":216,"color":"3"},
		{"id":"d6e8015de50e0421","type":"text","text":"### Modalities\n- corresponding modelling distributions\n- #### DNA methylation profile\n\t- OmiVAE [[OmiVAE, BABEL, AAE GAN latent matching]]\n\t\t- modelling output with sigmoid\n\t\t- cross-entropy loss\n- #### Gene expression profile\n\t- OmiVAE [[OmiVAE, BABEL, AAE GAN latent matching]]\n\t\t- modelling output with sigmoid\n\t\t- cross-entropy loss\n- #### RNA profile\n\t- BABEL [[OmiVAE, BABEL, AAE GAN latent matching]]\n\t\t- preprocessing\n\t\t\t- *\"We treat single-cell expression data as continuous values. To preprocess expression data, we start with a matrix of unnormalized counts per gene per cell generated using Hg38 (or mm10 for mouse data). These can be produced using tools like CellRanger. We remove genes encoded on sex chromosomes and cells expressing fewer than 200 genes or more than 7,000 genes (2,500 for mouse data). For the combined DM, HSR, and PBMC human data, this retains 34,861/36,417 cells. This retains 34,180/34,774 cells for SHAREseq mouse data, and 10,302/10,309 cells for SNAREseq mouse data. We then size-normalize the data, such that each cell’s counts sum to the median counts per cell. We log-transform the size-normalized counts and standardize these to zero mean and unit variance. We also clip values within the top and bottom 0.5% of the overall distribution. When preprocessing external single-cell expression data for model evaluation, we perform this same series of preprocessing steps.\"*\n\t\t- claim that the representation is more robust to noise\n\t\t- negative binomial loss\n\t\t\t- *\"To evaluate the correctness of inferred RNA values (whether these inferences were generated from an ATAC or RNA input), we use a negative binomial (NB) loss, which has seen success in prior works imputing and denoising single-cell expression ([11](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8054007/#r11), [13](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8054007/#r13)). Notably, this loss encourages BABEL to estimate the denoised single-cell expression, rather than the noisy experimental counts ([11](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8054007/#r11)).\"*\n- #### ATAC chromatine accessibility\n\t- BABEL [[[OmiVAE, BABEL, AAE GAN latent matching]]]\n\t\t- preprocessing\n\t\t\t- *\"We treat scATAC-seq data as a binary signal, as we found that a continuous representation made the prediction problem significantly more difficult without providing a meaningful measure of increased accessibility. To preprocess scATAC-seq data, we start with a matrix of cells by peaks, also generated using Hg38 (or mm10 for mouse data). Such matrices can be produced by tools like ArchR or Signac. We remove peaks on sex chromosomes, merge overlapping peaks, and binarize the data by replacing all nonzero values with a value of 1. We then remove peaks occurring in fewer than five cells or more than 10% of cells. This retains 223,897/245,139 peaks for human data, 215,083/238,720 peaks for SNARE-seq, and 326,037/338,304 peaks for SHARE-seq. Removing overly rare peaks helps prevent the model from overfitting on just a handful of examples, while removing overly common peaks helps the model focus on learning important variation between cells. Overall, BABEL is given a filtered, binarized view of the original ATAC peaks.\"*\n\t\t- claim that the representation is more robust to noise\n\t\t- binarized *\"any peak with nonzero signal is set to “1” and is otherwise “0.” BABEL then predicts the probability that a peak is active\"*\n\t\t- *\"To evaluate the correctness of inferred ATAC values, we use a binary cross entropy (BCE) loss—a natural cost function for binary predictions used in prior deep learning models for scATAC-seq data ([14](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8054007/#r14)).\"*","x":137,"y":-680,"width":420,"height":360,"color":"3"},
		{"id":"4344a3fc39026687","type":"text","text":"# EVALUATION","x":1110,"y":-714,"width":260,"height":50,"color":"2"},
		{"id":"52b1e3f1f45813e8","type":"text","text":"## Modality translation/inference\n- deterministic\n- probabilistic","x":267,"y":-86,"width":343,"height":62,"color":"6"},
		{"id":"3204cd8e3fda227a","type":"text","text":"## Multimodal integration","x":610,"y":-113,"width":350,"height":50,"color":"6"},
		{"id":"d0d46dbb3f048845","type":"file","file":"Notes factory/VAE evaluation.md","x":1160,"y":-500,"width":560,"height":240,"color":"2"},
		{"id":"330a847d43dc20e3","type":"text","text":"### Data splits\n- BABEL [[OmiVAE, BABEL, AAE GAN latent matching]]\n\t- *\"Training, validation, and test splits were defined by clustering the log-normalized, size-normalized RNA expression data using the Leiden algorithm ([51](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8054007/#r51)) with a resolution of 1.5. The two largest clusters form validation and test clusters, with remaining cells comprising the training set. Cluster-based data splits reduce the model’s propensity to perform well on validation or test sets by simply “memorizing” a similar cell seen during training. Performance on the test cluster is thus a stronger indicator for how well the model will generalize.\"*","x":660,"y":-520,"width":329,"height":118,"color":"2"},
		{"id":"72b1323f6855ee90","type":"text","text":"# Latent Conditioning\n- define a model taking a bunch of conditions and provide flexibly a latent prior mixture given these conditions\n\t- what about trying to regress on the \"condition\" vector using the latent to get the analogue to clustering behavior induced by classification in the latent ","x":-1700,"y":-211,"width":460,"height":122,"color":"5"}
	],
	"edges":[
		{"id":"d585c4ba5363f5f4","fromNode":"d66be28ac10eb9f9","fromSide":"bottom","toNode":"5df52eaf90b24438","toSide":"top"},
		{"id":"c0f95adbfa95499d","fromNode":"d66be28ac10eb9f9","fromSide":"bottom","toNode":"600f191534d4d00c","toSide":"top"},
		{"id":"34365a112eda09e5","fromNode":"87977fdd84f396d0","fromSide":"bottom","toNode":"d66be28ac10eb9f9","toSide":"top"},
		{"id":"1fa13c84b6be8b50","fromNode":"87977fdd84f396d0","fromSide":"bottom","toNode":"eb096f6e8a28bdb2","toSide":"top"},
		{"id":"fca6e72c85d8c8aa","fromNode":"eb096f6e8a28bdb2","fromSide":"left","toNode":"d66be28ac10eb9f9","toSide":"right"},
		{"id":"22871ae46581059b","fromNode":"d66be28ac10eb9f9","fromSide":"left","toNode":"5450ad07019b95df","toSide":"right"},
		{"id":"039c3675108add2c","fromNode":"87977fdd84f396d0","fromSide":"right","toNode":"d6e8015de50e0421","toSide":"left"},
		{"id":"5a1c883d437c5dcc","fromNode":"d6e8015de50e0421","fromSide":"bottom","toNode":"eb096f6e8a28bdb2","toSide":"top"},
		{"id":"3ea927e9d45c7211","fromNode":"4344a3fc39026687","fromSide":"bottom","toNode":"d0d46dbb3f048845","toSide":"top"},
		{"id":"e1cb3b385e2b6465","fromNode":"d6e8015de50e0421","fromSide":"bottom","toNode":"52b1e3f1f45813e8","toSide":"top"},
		{"id":"d7c4cfa21d710fff","fromNode":"d6e8015de50e0421","fromSide":"bottom","toNode":"3204cd8e3fda227a","toSide":"top"},
		{"id":"dfe77131f801e067","fromNode":"4344a3fc39026687","fromSide":"bottom","toNode":"330a847d43dc20e3","toSide":"top"},
		{"id":"f01166b1f4b6a948","fromNode":"5450ad07019b95df","fromSide":"left","toNode":"72b1323f6855ee90","toSide":"right"}
	]
}